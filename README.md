# Chord_Demo

```java
@author = Renjie Li, Di Wu
```

## usage

1. compile and give the test file execute permission

```bash
make clean; make
chmod +x test.sh
```

2. you can put the dataset in directory ChordDemo/ , and its structure should be like `ChordDemo/shakespeares.txt` ( the name of data file). 

3. change configuration files in `config` directory, each file (for SuperNode and Nodes) should be ( with a suffix `.cfg`). 

```txt
[IP Address]
[port number]
```

> If you want to add more Nodes, just add more configuration files for them in the same format.

4. start SuperNode first, and then run Nodes by using command line (in six different machines or terminals).

> If you try to run it on different machines, please use `ssh` command to log in remote machines first.
>
> And make sure use the same directory for all Nodes, Client and SuperNode (for multiple machines please use NSF).

```bash
./test.sh SuperNode 128
# 128 is the number of Nodes that SuperNode can handle
# you can change it to any number, but make sure it is the power of 2
./test.sh Node1
./test.sh Node2
./test.sh Node3
./test.sh Node4
./test.sh Node5
```

> This script assume that we have 5 Nodes. If you want to add more Nodes, please refer to part `3.`

5. run the Client

```bash
./test.sh Client
```

6. follow the instruction of the Client, then the (test) result will be print on the terminal. For the usage of Client, please refer to the `Design.md`, part `1`.

> you can use the data from your data file to test our system

## structure

* `shakespeares.txt` (should be uploaded by user): the name of input file
* `config/`
    * `SuperNode.cfg`: the configuration file of the SuperNode
    * `Node1.cfg`, `Node2.cfg`, `Node3.cfg`, `Node4.cfg`, `Node5.cfg`: configuration files of Nodes
* `doc/`
    * `Design.md`: the design of each `.java` file
    * `Evaluation.md`: test cases
    * `pic`: pictures for document
* `Makefile`, `test.sh`: can be helpful for testing/debugging
* `chord.thrift`: the thrift file used for generating interfaces
* `src/`: source files
    * `Client.java`
    * `SuperNode.java`, `SuperNodeHandler.java`
    * `Node.java`, `NodeHandler.java`
    * `node_interface.java`, `supernode_interface.java`, `Info_iip.java`: interfaces, generated by thrift
* `.gitignore`: avoid to upload some files to git server in debugging process
* `README.md`: this file
